(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{8404:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"o-access"},[r("q-stepper",{ref:"stepper",staticClass:"bg-primary no-shadow",attrs:{animated:"",contracted:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("q-step",{attrs:{name:1,title:"Register",done:e.step>1}},[r("step1",{on:{next:e.next}})],1),r("q-step",{attrs:{name:2,title:"Personal data",done:e.step>2}},[r("step2",{on:{next:e.next}})],1),r("q-step",{attrs:{name:3,title:"Themes"}},[r("step3",{on:{finish:e.finish}})],1)],1)],1)},s=[],n=r("967e"),o=r.n(n),i=(r("96cf"),r("fa84")),c=r.n(i),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"o-access_step1"},[r("h1",{staticClass:"a-title -white"},[e._v("LIS")]),r("div",{staticClass:"a-title -white -sub"},[e._v("\n    Learn is Simple\n  ")]),r("q-btn",{staticClass:"bg-white o-access_btn",attrs:{"no-caps":"",rounded:"",outline:"",color:"primary",size:"lg",label:e.$t("access.btnRegister")},on:{click:e.next}}),r("q-btn",{staticClass:"bg-white o-access_btn",attrs:{"no-caps":"",rounded:"",outline:"",color:"primary",size:"lg",label:e.$t("access.btnLogin"),to:{name:"login"}}})],1)},m=[],p={name:"step1",methods:{next:function(){this.$emit("next")}}},u=p,f=r("2877"),h=r("eebe"),d=r.n(h),b=r("9c40"),$=Object(f["a"])(u,l,m,!1,null,null,null),v=$.exports;d()($,"components",{QBtn:b["a"]});var w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"o-access_step2"},[r("div",{staticClass:"a-title -white -sub"},[e._v("\n    "+e._s(e.$t("access.personalData.title"))+"\n  ")]),r("q-input",{staticClass:"primary-error",attrs:{dark:"",color:"white","label-color":"white",error:e.$v.form.name.$error,"error-message":e.$t("access.personalData.errors.required"),label:e.$t("access.personalData.name")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("q-input",{staticClass:"primary-error",attrs:{dark:"",color:"white","label-color":"white",error:e.$v.form.nickname.$error,"error-message":e.$t("access.personalData.errors.required"),label:e.$t("access.personalData.nickname")},on:{blur:function(t){e.$v.form.nickname.$touch,e.verifyUser("nicknameCheck",e.form.nickname)}},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}}),r("q-input",{staticClass:"primary-error",attrs:{dark:"",color:"white","label-color":"white",error:e.$v.form.email.$error,"error-message":e.$t("access.personalData.errors.required"),label:e.$t("access.personalData.email")},on:{blur:function(t){e.$v.form.email.$touch,e.verifyUser("emailCheck",e.form.email)}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("q-input",{staticClass:"primary-error",attrs:{dark:"",color:"white","label-color":"white",autocomplete:"new-password",rules:[function(t){return null!==e.pattern[0].exec(t)||e.$t("pattern.lower")},function(t){return null!==e.pattern[1].exec(t)||e.$t("pattern.upper")},function(t){return null!==e.pattern[2].exec(t)||e.$t("pattern.number")},function(t){return null!==e.pattern[3].exec(t)||e.$t("pattern.min")}],"lazy-rules":"",type:"password",label:e.$t("access.personalData.password"),hint:e.$t("access.personalData.strongPassword")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("q-input",{staticClass:"primary-error",attrs:{dark:"",color:"white","label-color":"white",error:e.$v.form.confirm_password.$error,"error-message":e.$t("access.personalData.errors.sameAs"),type:"password",label:e.$t("access.personalData.passwordConfirmation")},on:{blur:e.$v.form.confirm_password.$touch},model:{value:e.form.confirm_password,callback:function(t){e.$set(e.form,"confirm_password",t)},expression:"form.confirm_password"}}),r("q-input",{staticClass:"primary-error",attrs:{label:e.$t("access.personalData.dateOfBirth"),dark:"",color:"white","label-color":"white",mask:"##/##/####",error:e.$v.form.dateOfBirth.$error,"error-message":e.$t("access.personalData.errors.required")},on:{blur:e.$v.form.dateOfBirth.$touch},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-date",{attrs:{mask:e.mask,locale:e.myLocale},on:{input:function(){return e.$refs.qDateProxy.hide()}},model:{value:e.form.dateOfBirth,callback:function(t){e.$set(e.form,"dateOfBirth",t)},expression:"form.dateOfBirth"}})],1)],1)]},proxy:!0}]),model:{value:e.form.dateOfBirth,callback:function(t){e.$set(e.form,"dateOfBirth",t)},expression:"form.dateOfBirth"}}),r("q-btn",{staticClass:"bg-white o-access_btn",attrs:{"no-caps":"",rounded:"",disabled:e.disabled,outline:"",color:"primary",size:"lg",label:e.$t("access.personalData.btn")},on:{click:e.next}})],1)},k=[],y=(r("28a5"),r("7f7f"),r("b5ae")),q=r("4360"),g={name:"step2",data:function(){return{pattern:[/^(?=.*[a-z])/,/^(?=.*[A-Z])/,/^(?=.*[0-9])/,/^(?=.{6,})/],form:{name:"",nickname:"",email:"",password:"",confirm_password:"",dateOfBirth:""},errors:{nicknameCheck:!1,emailCheck:!1}}},validations:{form:{email:{required:y["required"],email:y["email"]},confirm_password:{required:y["required"],sameAsPassword:Object(y["sameAs"])("password")},name:{required:y["required"]},nickname:{required:y["required"]},dateOfBirth:{required:y["required"]}}},methods:{next:function(){var e=this.formatDate(this.form.dateOfBirth),t={name:this.form.name,nickname:this.form.nickname,email:this.form.email,password:this.form.password,date_of_birth:e,nationality_id:1};this.$v.form.$touch(),this.$v.form.$error||this.$emit("next",t)},verifyUser:function(e,t){var r=this;return c()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={payload:{}},s.payload="nicknameCheck"===e?{nickname:t}:{email:t},a.next=4,Object(q["a"])().dispatch("user/checkUser",s);case 4:n=a.sent,204===n?(r.$q.notify({color:"negative",message:r.$i18n.t("errorFilter.".concat(e,".").concat(n)),icon:"report_problem"}),"nicknameCheck"===e?r.errors.nicknameCheck=!0:r.errors.emailCheck=!0):"nicknameCheck"===e?r.errors.nicknameCheck=!1:r.errors.emailCheck=!1;case 6:case"end":return a.stop()}}),a)})))()},formatDate:function(e){var t=e.split("/");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},computed:{disabled:function(){var e=this.errors.nicknameCheck||this.errors.emailCheck;return e},isValid:function(){return null!==this.pattern.exec(this.form.password)},mask:function(){return this.$t("access.personalData.dateFormat")},myLocale:function(){return{days:this.$t("access.personalData.myLocale.days").split("_"),daysShort:this.$t("access.personalData.myLocale.daysShort").split("_"),months:this.$t("access.personalData.myLocale.months").split("_"),monthsShort:this.$t("access.personalData.myLocale.monthsShort").split("_")}}}},x=g,_=r("27f9"),C=r("0016"),O=r("7cbe"),D=r("52ee"),j=Object(f["a"])(x,w,k,!1,null,null,null),P=j.exports;d()(j,"components",{QInput:_["a"],QIcon:C["a"],QPopupProxy:O["a"],QDate:D["a"],QBtn:b["a"]});var B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"o-access_step3"},[r("div",{staticClass:"a-title -white -sub"},[e._v("\n    "+e._s(e.$t("access.choiceOfThemes.title"))+"\n  ")]),r("q-card",{staticClass:"my-card o-access_selectTheme"},[r("q-card-section",[r("q-input",{attrs:{dense:"",label:e.$t("access.choiceOfThemes.search")},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),r("q-card-section",[e._v("\n      "+e._s(e.$t("access.choiceOfThemes.info"))+"\n    ")]),r("q-card-section",e._l(e.filterThemes,(function(t,a){return r("q-card",{key:t.id,staticClass:"m-card"},[r("q-card-section",{staticClass:"q-pa-xs"},[r("q-checkbox",{attrs:{label:t.name,color:"accent"},model:{value:e.themes[a],callback:function(t){e.$set(e.themes,a,t)},expression:"themes[index]"}})],1)],1)})),1)],1),r("q-btn",{staticClass:"bg-white o-access_btn",attrs:{"no-caps":"",rounded:"",outline:"",color:"primary",size:"lg",label:e.$t("access.choiceOfThemes.btn")},on:{click:e.finish}})],1)},Q=[],T=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("6762"),r("2fdb"),r("c47a")),S=r.n(T),L=r("2f62");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={name:"step3",data:function(){return{filter:"",themes:[]}},methods:{finish:function(){for(var e=this,t=!0,r=0;r<this.themes.length;r+=1)this.themes[r]&&(t=!1);if(t)this.$q.notify({color:"negative",message:this.$i18n.t("errorFilter.selectThemes"),icon:"report_problem"});else{var a=[];this.themes.forEach((function(t,r){t&&a.push(e.getTheme[r].id)})),this.$emit("finish",a)}}},computed:z(z({},Object(L["b"])("theme",["getTheme"])),{},{filterThemes:function(){var e=this;return this.filter?this.getTheme.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})):this.getTheme}}),created:function(){for(var e=0;e<this.getTheme.length;e+=1)this.themes.push(!1)}},U=A,F=r("f09f"),I=r("a370"),J=r("8f8e"),R=Object(f["a"])(U,B,Q,!1,null,null,null),V=R.exports;d()(R,"components",{QCard:F["a"],QCardSection:I["a"],QInput:_["a"],QCheckbox:J["a"],QBtn:b["a"]});var Z={name:"Access",components:{step1:v,step2:P,step3:V},data:function(){return{step:1,personalData:null}},methods:{next:function(e){e&&(this.personalData=e),this.$refs.stepper.next()},finish:function(e){var t=this;return c()(o.a.mark((function r(){var a,s;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.personalData,a.themes=e,t.$q.loading.show(),r.next=5,Object(q["a"])().dispatch("user/createUser",a);case 5:s=r.sent,s.status?(t.$q.notify({color:"positive",message:t.$i18n.t("access.personalData.registeredSuccessfully"),icon:"report_problem"}),t.$router.push({name:"login"})):t.$q.notify({color:"negative",message:t.$i18n.t("errorFilter.user.".concat(s.error.response.status)),icon:"report_problem"}),t.$q.loading.hide();case 8:case"end":return r.stop()}}),r)})))()}}},G=Z,H=r("9989"),K=r("f531"),M=r("87fe"),N=Object(f["a"])(G,a,s,!1,null,null,null);t["default"]=N.exports;d()(N,"components",{QPage:H["a"],QStepper:K["a"],QStep:M["a"]})}}]);