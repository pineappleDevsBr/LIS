(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0e50":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:t.persistent},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[s("q-card",{staticClass:"m-card -limit"},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm",domProps:{innerHTML:t._s(t.title)}})]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"a-btn -dark",attrs:{flat:"",rounded:"",label:t.$t("dlg.yes")},on:{click:function(e){return t.close(!0)}}}),s("q-btn",{staticClass:"a-btn -dark",attrs:{flat:"",rounded:"",label:t.$t("dlg.no")},on:{click:function(e){return t.close(!1)}}})],1)],1)],1)},a=[],n={name:"dlg-confirm",props:{isOpen:Boolean,persistent:Boolean,title:String},methods:{close:function(t){this.$emit("close",t)}}},c=n,i=s("2877"),o=s("eebe"),l=s.n(o),u=s("24e8"),d=s("f09f"),m=s("a370"),p=s("4b7e"),b=s("9c40"),f=Object(i["a"])(c,r,a,!1,null,null,null);e["a"]=f.exports;l()(f,"components",{QDialog:u["a"],QCard:d["a"],QCardSection:m["a"],QCardActions:p["a"],QBtn:b["a"]})},"905d":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-store"},[s("div",{staticClass:"m-store_money"},[s("span",{attrs:{id:"countStore"}},[t._v(t._s(t.getUser.money))]),s("img",{staticClass:"m-store_coin",attrs:{src:"statics/store/coin.svg",alt:""}})]),s("div",{staticClass:"m-spotlight"},[s("img",{staticClass:"m-spotlight_icon",attrs:{src:"statics/store/online-store.svg",alt:"Store"}}),t._v("\n    "+t._s(t.$t("store.title"))+"\n  ")]),t.getMyItems?s("div",{staticClass:"m-store_group"},[s("h2",{staticClass:"m-store_title"},[t._v(t._s(t.$t("store.myItems.title")))]),s("div",{staticClass:"m-cards"},t._l(t.getMyItems,(function(e){return s("q-card",{key:e.item.id,staticClass:"m-card",on:{click:function(s){return t.useProduct(e.item.id,e.item.item_id,e.item.status)}}},[s("q-card-section",{staticClass:"m-store_box-product"},[s("q-badge",{attrs:{floating:"",color:"primary","text-color":"white",label:e.qtde+"x"}}),s("div",{staticClass:"m-store_price"},[s("strong",[t._v(t._s("inactivated"===e.item.status?t.$t("store.myItems.use"):t.$t("store.myItems.inUse")))])]),s("img",{staticClass:"m-store_icon",attrs:{src:"statics/store/products/"+e.item.item.icon+".svg",alt:""}}),s("div",{staticClass:"m-store_product"},[s("h2",{staticClass:"m-store_subtitle"},[t._v(t._s(e.item.item.name))])])],1)],1)})),1)]):t._e(),s("h2",{staticClass:"m-store_title"},[t._v(t._s(t.$t("store.availableItems")))]),t.getItems?s("div",{staticClass:"m-cards"},[t._l(t.getItems,(function(e){return s("q-card",{key:e.id,staticClass:"m-card",on:{click:function(s){return t.buyProduct(e.id)}}},[s("q-card-section",{staticClass:"m-store_box-product"},[s("div",{staticClass:"m-store_price"},[s("strong",[t._v(t._s(e.price))]),s("img",{staticClass:"m-store_coin",attrs:{src:"statics/store/coin.svg",alt:e.name}})]),s("img",{staticClass:"m-store_icon",attrs:{src:"statics/store/products/"+e.icon+".svg",alt:e.name}}),s("div",{staticClass:"m-store_product"},[s("h2",{staticClass:"m-store_subtitle"},[t._v(t._s(e.name))])])])],1)})),s("buy",{attrs:{buy:t.buyConfirm,product:t.getItems[t.productId]},on:{close:t.closeBuyConfirm}})],2):s("div",{staticClass:"m-cards"},t._l(3,(function(t){return s("q-card",{key:"skl_"+t,staticClass:"m-card m-skeleton -center"},[s("q-card-section",{staticClass:"q-pa-xs"},[s("q-skeleton",{staticClass:"m-skeleton_price",attrs:{type:"text"}})],1),s("q-card-section",{staticClass:"q-pa-xs"},[s("q-skeleton",{staticClass:"m-skeleton_avatar -center",attrs:{type:"QAvatar"}})],1),s("q-card-section",{staticClass:"q-pa-xs"},[s("q-skeleton",{staticClass:"m-skeleton_title -sm -center",attrs:{type:"text"}})],1)],1)})),1),s("q-dialog",{attrs:{position:"bottom"},model:{value:t.selectFriend,callback:function(e){t.selectFriend=e},expression:"selectFriend"}},[s("div",{staticClass:"m-store_present-list"},t._l(t.getFriends,(function(e){return s("q-card",{key:e.id,staticClass:"m-card",on:{click:function(s){return t.usePresent(t.itemSelect,e.id)}}},[s("q-card-section",{staticClass:"m-friends_card"},[s("div",{staticClass:"m-friends_profile"},[s("img",{staticClass:"m-friends_avatar",attrs:{src:"https://api.adorable.io/avatars/75/"+e.avatar,alt:"adorable avatar"}}),s("div",[s("h2",{staticClass:"m-friends_username q-dark_title"},[t._v(t._s(e.name))]),s("p",{staticClass:"m-friends_level"},[t._v(t._s(t.$t("hub.level"))+": "+t._s(e.level.level?e.level.level:1))]),s("p",{staticClass:"m-friends_xp"},[t._v(t._s(e.xp)+"XP")])])]),s("div",[s("img",{staticClass:"m-friends_nationality",attrs:{src:"statics/nationalities/"+e.nationality_id+".svg",alt:"Nacionalidade"}})])])],1)})),1)]),s("confirmUse",{attrs:{persistent:t.confirmUse.presistent,title:t.confirmUse.title,isOpen:t.confirmUse.open},on:{close:t.activeProduct}})],1)},a=[],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),c=s.n(n),i=s("967e"),o=s.n(i),l=(s("96cf"),s("fa84")),u=s.n(l),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.buy,callback:function(e){t.buy=e},expression:"buy"}},[s("q-card",{staticClass:"m-card m-buy"},[s("q-card-section",{staticClass:"m-buy_cash"},[t._v("\n      "+t._s(t.$t("store.buy.price"))+": "+t._s(t.buyProduct.price)+"\n      "),s("img",{staticClass:"m-buy_cash-icon",attrs:{src:"statics/store/coin.svg",alt:""}})]),s("q-card-section",{staticClass:"m-buy_product"},[s("h2",{staticClass:"m-buy_product-name"},[t._v(t._s(t.buyProduct.name))]),s("img",{staticClass:"m-buy_product_icon",attrs:{src:"statics/store/products/"+t.buyProduct.icon+".svg",alt:""}}),s("p",{staticClass:"m-buy_product_description"},[s("strong",[t._v(t._s(t.buyProduct.name)+": ")]),t._v(t._s(t.buyProduct.description))])]),s("q-card-actions",{staticClass:"m-buy_add"},[s("span",[s("strong",[t._v(t._s(t.$t("store.buy.units"))+":")]),t._v(" "+t._s(t.qtde))]),s("div",[s("q-btn",{staticClass:"m-buy_add-btn",attrs:{push:"",round:"",dense:"",icon:"remove"},on:{click:t.remove}}),s("q-btn",{staticClass:"m-buy_add-btn",attrs:{push:"",round:"",dense:"",icon:"add"},on:{click:t.add}})],1)]),s("q-card-section",{staticClass:"m-buy_value"},[t._v("\n      "+t._s(t.$t("store.buy.total"))+": "+t._s(t.value)+"\n    ")]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"a-btn_actions",attrs:{flat:"",label:t.$t("store.buy.cancel")},on:{click:t.close}}),s("q-btn",{staticClass:"a-btn_actions",attrs:{flat:"",label:t.$t("store.buy.buy")},on:{click:t.finishBuy}})],1)],1)],1)},m=[],p=s("2f62"),b=s("4360");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var y={name:"buy",props:{buy:Boolean,product:Object},data:function(){return{qtde:1,buyProduct:{}}},methods:{remove:function(){this.qtde>1&&(this.qtde-=1)},add:function(){this.value+this.buyProduct.price<=this.getUser.money&&(this.qtde+=1)},finishBuy:function(){var t=this;return u()(o.a.mark((function e(){var s,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),s={id:t.buyProduct.id,quantify:t.qtde},e.next=4,Object(b["a"])().dispatch("store/buyItem",s);case 4:if(r=e.sent,!r){e.next=12;break}return e.next=8,Object(b["a"])().dispatch("user/getUser");case 8:t.$q.notify({color:"positive",message:"Compra realizada com sucesso!",icon:"shop"}),t.$emit("close"),e.next=13;break;case 12:t.$q.notify({color:"negative",message:"Houve um erro ao processar sua compra. Tente novamente ou entre em contato com o suporte tecnico.",icon:"error"});case 13:t.qtde=1,t.$q.loading.hide();case 15:case"end":return e.stop()}}),e)})))()},close:function(){this.$emit("close"),this.qtde=1}},watch:{product:function(t){this.buyProduct=t}},computed:v(v({},Object(p["b"])("user",["getUser"])),{},{value:function(){return this.qtde*this.buyProduct.price}})},_=y,g=s("2877"),h=s("eebe"),C=s.n(h),q=s("24e8"),O=s("f09f"),k=s("a370"),j=s("4b7e"),w=s("9c40"),x=s("eb85"),P=Object(g["a"])(_,d,m,!1,null,null,null),$=P.exports;C()(P,"components",{QDialog:q["a"],QCard:O["a"],QCardSection:k["a"],QCardActions:j["a"],QBtn:w["a"],QSeparator:x["a"]});var I=s("0e50"),S=s("1a23");function U(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function Q(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?U(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var D={name:"Store",components:{buy:$,confirmUse:I["a"]},data:function(){return{evt:null,buyConfirm:!1,productId:0,currentMoney:0,selectFriend:!1,friend:null,itemSelect:null,useConfirm:!1,confirmUse:{open:!1,persistent:!0,title:this.$t("store.confirmUseItem")}}},methods:{buyProduct:function(t){this.getUser.money>=this.getItems[t-1].price?(this.productId=t-1,this.buyConfirm=!0,this.currentMoney=this.getUser.money):this.$q.notify({color:"negative",message:this.$t("store.insufficientCurrencies"),icon:"monetization_on"})},useProduct:function(t,e,s){var r=this;return u()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:"inactivated"===s&&(r.itemSelect=t,3===e?r.selectFriend=!0:r.$q.cookies.get("lis_confirmUseItems")?r.activeProduct(r.itemSelect):r.confirmUse.open=!0);case 1:case"end":return a.stop()}}),a)})))()},activeProduct:function(t){var e=this;return u()(o.a.mark((function s(){var r,a;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t){s.next=12;break}return r={id:e.itemSelect},s.next=4,Object(b["a"])().dispatch("store/useItem",r);case 4:if(a=s.sent,!a){s.next=11;break}return s.next=8,Object(b["a"])().dispatch("store/getMyItems");case 8:e.$q.notify({color:"positive",message:e.$t("store.activatedItem"),icon:"done"}),s.next=12;break;case 11:e.$q.notify({color:"negative",message:e.$t("store.errorActivating"),icon:"report_problem"});case 12:e.confirmUse.open=!1;case 13:case"end":return s.stop()}}),s)})))()},usePresent:function(t,e){var s=this;return u()(o.a.mark((function r(){var a,n;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:t,friend:e},r.next=3,Object(b["a"])().dispatch("store/useItem",a);case 3:if(n=r.sent,!n){r.next=11;break}return r.next=7,Object(b["a"])().dispatch("store/getMyItems");case 7:s.selectFriend=!1,s.$q.notify({color:"positive",message:s.$t("store.gift"),icon:"card_giftcard"}),r.next=12;break;case 11:s.$q.notify({color:"negative",message:s.$t("store.errorActivating"),icon:"report_problem"});case 12:case"end":return r.stop()}}),r)})))()},closeBuyConfirm:function(){var t=this;return u()(o.a.mark((function e(){var s,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={startVal:t.currentMoney},r=new S["a"]("countStore",t.getUser.money,s),r.error?console.error(r.error):r.start(),e.next=5,Object(b["a"])().dispatch("store/getMyItems");case 5:t.buyConfirm=!1;case 6:case"end":return e.stop()}}),e)})))()}},computed:Q(Q(Q(Q({},Object(p["b"])("user",["getUser"])),Object(p["b"])("store",["getItems"])),Object(p["b"])("store",["getMyItems"])),Object(p["b"])("friends",["getFriends"])),mounted:function(){return u()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["a"])().dispatch("store/getItems");case 2:return t.next=4,Object(b["a"])().dispatch("store/getMyItems");case 4:return t.next=6,Object(b["a"])().dispatch("friends/getFriends");case 6:case"end":return t.stop()}}),t)})))()}},M=D,B=s("58a8"),F=s("293e"),E=Object(g["a"])(M,r,a,!1,null,null,null);e["default"]=E.exports;C()(E,"components",{QCard:O["a"],QCardSection:k["a"],QBadge:B["a"],QSkeleton:F["a"],QDialog:q["a"]})}}]);